<!doctype html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport"
          content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <meta name="viewport"
          content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
    <title>新浪微博</title>
    <link rel="stylesheet" href="http://simg.sinajs.cn/miniblog/css/common/common.css?version=1.1.2.72"/>
    <link rel="stylesheet" href="http://simg.sinajs.cn/miniblog/css/index/index.css?version=1.1.2.72"/>
    <link rel="stylesheet" href="http://simg.sinajs.cn/miniblog/skin/skin_001/skin.css?version=1.1.2.72"/>
    <style>
        #absNum_click {
            position: absolute;
            width: 46px;
            height: 28px;
            left: 0px;
            top: 0px;
            display: none;
            font-size: 18px;
            opacity: 1;
            zoom: 1;
            transition: 1s all;
        }

        #sendNum_click {
            opacity: 0.2;
        }
    </style>
</head>
<body>
<div class="bigBg">
    <div class="mblog">
        <div class="toptray">
            <div class="toptrayBg"></div>
            <div class="toptrayMain">
                <div class="tTray_R">
                    <div class="MnbTit">
                        <ul>
                            <li><a href="javascript:void(0);">新浪微博</a></li>
                            <li class="banLine">
                                <img height="11" width="2"
                                     src="http://simg.sinajs.cn/miniblog/images/common/toptray/bannerLine.gif"/>
                            </li>
                            <li><a href="javascript:void(0);">我的首页</a></li>
                            <li class="banLine">
                                <img height="11" width="2"
                                     src="http://simg.sinajs.cn/miniblog/images/common/toptray/bannerLine.gif"/>
                            </li>
                            <li><a href="javascript:void(0);">我的微博</a></li>
                            <li class="banLine">
                                <img height="11" width="2"
                                     src="http://simg.sinajs.cn/miniblog/images/common/toptray/bannerLine.gif"/>
                            </li>
                            <li><a href="javascript:void(0);">随便看看</a></li>
                        </ul>
                    </div>
                </div>
                <div class="BanCont">
                    <ul>
                        <li><a href="javascript:void(0);">设置</a></li>
                        <li class="banLine"><img height="11" width="2"
                                                 src="http://simg.sinajs.cn/miniblog/images/common/toptray/bannerLine.gif"/>
                        </li>
                        <li><a href="javascript:void(0);">手机</a></li>
                        <li class="banLine"><img height="11" width="2"
                                                 src="http://simg.sinajs.cn/miniblog/images/common/toptray/bannerLine.gif"/>
                        </li>
                        <li><a href="javascript:void(0);">找朋友</a></li>
                        <li class="banLine"><img height="11" width="2"
                                                 src="http://simg.sinajs.cn/miniblog/images/common/toptray/bannerLine.gif"/>
                        </li>
                        <li><a target="_blank" href="javascript:void(0);">帮助</a></li>
                        <li class="banLine"><img height="11" width="2"
                                                 src="http://simg.sinajs.cn/miniblog/images/common/toptray/bannerLine.gif"/>
                        </li>
                        <li><a href="javascript:void(0);">退出</a></li>
                    </ul>
                </div>
                <div class="tTray_L">
                    <div id="m_search" class="search">
                        <input type="text" value="搜索话题、朋友..." id="m_keyword" class="fm_txt"/>
                        <div class="searchBtn"><a id="m_submit" href="javascript:void(0);">搜索</a></div>
                    </div>
                </div>
            </div>
        </div>
        <!-- logo部分 -->
        <div class="bigName">
            <div id="fbq" class="logo"><a href="http://t.sina.com.cn/1263362863"></a></div>
            <div class="searchFri"><a href="/invite/invite.php">邀请朋友关注我</a></div>
        </div>
    </div>
    <!--  主体部分 -->
    <div class="main">
        <div class="mainBottomBg">
            <!-- 左半部分 -->
            <div class="mainL">
                <div class="fbq">
                    <div class="box_1"><!--php需要输出的提示文本--></div>
                    <div id="publisher_info" class="fbqCount">你还可以输入<em class="bold">140</em>字</div>
                    <div class="box_2">
                        <textarea id="publish_editor"></textarea>
                    </div>
                    <div class="box_3">
                    	<span id="publisher_image" class="span_1" style="margin-left:20px;">
                			<a unselectable="on" href="javascript:void(0);">插入图片</a>
                		</span>
                        <span id="publisher_topic" class="span_2">
                			<a href="javascript:void(0);">插入话题</a>
                		</span>
                        <a id="publisher_submit" class="btn2" href="javascript:void(0);"
                           style="float:right; margin-right:58px;"></a>
                        <!-- <a id="publisher_submit" class="btn" href="javascript:void(0);"/> -->
                    </div>
                </div>
                <div class="feedBox" id="feedBox">
                    <div id="feedTitle" class="feedBoxNav">
						<span style="" id="feed_msg_new" class="spanFloat">
							<a href="javascript:void(0);">有新微博，刷新看看</a>
						</span>
                        <span class="bold" style="color:#444444;">我的首页</span>
                        <span>
						</span>
                        <div class="mBlog_linedot"></div>
                    </div>
                    <div class="feedList">
                        <div class="feedCell">
                            <div class="avatar">
                                <a href="http://t.sina.com.cn/zhangxinxu"><img title="张鑫旭"
                                                                               src="http://tt8.sinaimg.cn/1263362863/50/1253773643"/></a>
                            </div>
                            <div class="Contant">
                                <div class="oriTxt">
                                    <p>
                                        <a title="我" href="http://t.sina.com.cn/zhangxinxu">我</a>：
                                        <span>刚翻译了一篇技术文章：让网络更快一些——最小化浏览器中的回流(reflow)
                                        <a title="http://www.zhangxinxu.com/wordpress/?p=311" target="_blank"
                                           href="http://www.zhangxinxu.com/wordpress/?p=311">http://sinaurl.cn/hfGnM</a>
                                        <a href="http://t.sina.com.cn/k/web">#web#</a>
                                        <a href="http://t.sina.com.cn/k/%25E4%25BC%2598%25E5%258C%2596">#优化#</a>
                                        <a href="http://t.sina.com.cn/k/reflow">#reflow#</a></span>
                                    </p>
                                </div>
                                <div class="from">
                                    <span class="option">
                                        <cite class="delete"><a href="javascript:void(0);">删除</a></cite>
                                        |
                                        <cite class="forward">转发</cite>
                                        |
                                        <cite class="collect"><a href="javascript:void(0);">收藏</a></cite>
                                        |
                                        <cite class="reply">
                                            <a href="javascript:void(0);">评论</a>
                                        </cite>
                                    </span>
                                    <span class="mycome"><cite><a href="#zhangxinxu">1分钟前</a></cite>来自新浪微博 </span>
                                </div>
                            </div>
                        </div>
                        <div class="mBlog_linedot"></div>
                    </div>
                </div>
            </div>
            <!-- 右半部分 -->
            <div class="mainR">
                <div class="person2">
                    <div class="person_content">
                        <div class="person_head">
                            <p class="userPt person_pt">
                                <a href="javascript:void(0);"><img title="张鑫旭"
                                                                   src="http://tt8.sinaimg.cn/1263362863/50/1253773643"/></a>
                            </p>
                            <div class="person_info">
                                <p class="person_nm"><strong>张鑫旭</strong></p>
                                <p title="浙江 杭州" class="person_level">浙江 杭州</p>
                            </div>
                            <div class="clear"></div>
                        </div>
                        <div class="person_atten">
                            <div class="person_atten_l">
                                <p class="num"><strong><a href="javascript:void(0);">792</a></strong></p>
                                <p class="person_atten_link"><a href="javascript:void(0);">关注</a></p>
                            </div>
                            <div class="person_atten_l boxW">
                                <p class="num"><strong><a href="javascript:void(0);">301</a></strong></p>
                                <p class="person_atten_link"><a href="javascript:void(0);">粉丝</a></p>
                            </div>
                            <div class="person_atten_r" style="position: relative;">
                                <p class="num">
                                    <strong style="position:absolute; width:46px; height:28px; line-height:28px; left:-4px; top:-3px; text-align:center;">
                                        <a href="javascript:void(0);" id="sendNum">166</a>
                                        <a href="#no" id="absNum"
                                           style="position:absolute; width:46px; height:28px; left:0; top:0; display:none;"></a>
                                    </strong>
                                </p>
                                <p></p>
                                <p class="person_atten_link"><a href="javascript:void(0);">微博</a></p>
                            </div>
                            <div class="clear"></div>
                        </div>
                        <div class="boxRNav">
                            <ul>
                                <li class="navStyle"><span class="span_home">我的首页</span></li>
                                <li class="navStyle2"><span class="span_mblog"><a href="/favs">我的收藏</a></span></li>
                                <li class="navStyle2"><span class="span_mblog"><a href="/atme">@我的</a></span></li>
                                <li class="navStyle2"><span id="toptray_ring" class="span_com"><a
                                        href="/comments">我的评论</a></span></li>
                                <li class="navStyle2"><span id="toptray_ring_message" class="span_com"><a
                                        href="/messages">我的私信</a></span></li>
                            </ul>
                        </div>
                    </div>
                </div>
                <!--话题列表-->
                <div class="f_pro">
                    <div class="title bold">关于我</div>
                    <div class="con">86出生，小小本科，本想做个生物学者，谁知大学误入歧途，进入了互联网行业，已无回头路，正朝着理想奋斗。</div>
                    <div class="more"><a href="javascript:void(0);">修改</a>>></div>
                </div>
            </div>
        </div>
    </div>
</div>
<script>
    var wb = {
        insertBtn: document.getElementById("publisher_submit"),
        insertArea: document.getElementById("publish_editor"),
        insertRemind: document.getElementById("publisher_info"),
        insertBody: document.getElementById("feedBox"),
        insertTitle: document.getElementById("feedTitle"),
        sendNum: document.getElementById("sendNum"),
        absNum: document.getElementById("absNum")
    };
    //当文本域获取焦点后，
    //
    //    键盘谈起的时候，判断字符的长度，计算number的显示，显示的number=maxnum-当前的长度；
    // 放到
    wb.insertArea.onfocus = function () {
        wordLimit(this, 140, wb.insertRemind);
    };
    function wordLimit(obj, maxnum, chword) {
        obj.onkeyup = function () {
            length = obj.value.length;
            nownum = maxnum - length;
            if (length <= maxnum) {
                chword.style.color = "#fff";
                chword.innerHTML = '还可以输入<em class="bold">' + nownum + "</em>个字";
            } else if (length > maxnum) {
                chword.style.color = "red";
                chword.innerHTML = '已超出<em class="bold">' + (-nownum) + "</em>个字";
            }
        };
    }
    //点击发布的时候在feedList中添加feedCell
    //    插入到前面 ／
    //    oriTxt中的内容和输入框的内容相等


    function insert() {
        first_list = document.querySelectorAll(".feedList")[0];
        var newcode = document.querySelector(".feedList").cloneNode(true);
        console.log(newcode);
        newcode.querySelector(".oriTxt span").innerHTML = wb.insertArea.value
        wb.insertBody.insertBefore(newcode, first_list);

    }


    wb.insertBtn.onclick = function () {
        if(wb.insertArea.value.length>0){
            insert();
            // sendNum变淡然后在回去，absNum显示放大然后在回去
            number( wb.sendNum, wb.absNum,1,24,18)
        }

    }

    function number(obj1,obj2,opacity,maxsize,normalsize){

        fontSize=normalsize;
        sendSize=normalsize;
        webnum = parseInt(obj1.innerHTML);
        webnum += 1;
        obj1.innerHTML = webnum;
        wb.absNum.innerHTML = webnum;
        sdtimer = setInterval(function () {
            opacity -= 0.1;
            if (opacity <= 0) {
                clearInterval(sdtimer);
                obj1.style.fontSize=normalsize+"px"

                obj1.style.opacity = 1;
            } else {
                obj1.style.opacity = opacity;
                obj1.style.fontSize=sendSize+"px"
                sendSize-=1;
            }
        }, 40);


        obj2.style.display="block";
        abtimer = setInterval(function () {
            fontSize+=1;
            if(fontSize>maxsize){
                obj2.style.display="none";
                obj2.style.zoom=1;
                clearInterval(abtimer);
                obj2.style.fontSize=normalsize+"px"
            }else{
                obj2.style.fontSize=fontSize+"px"
            }
        }, 40)
    }
</script>
</body>
</html>